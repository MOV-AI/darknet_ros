#!/bin/sh
# preinst script for helloworld
#
# see: dh_installdeb(1)

set -e

# summary of how this script can be called:
#        * <new-preinst> `install'
#        * <new-preinst> `install' <old-version>
#        * <new-preinst> `upgrade' <old-version>
#        * <old-preinst> `abort-upgrade' <new-version>
# for details, see http://www.debian.org/doc/debian-policy/ or
# the debian-policy package


case "$1" in
    install|upgrade)
    ;;

    abort-upgrade)
    ;;

    *)
        echo "preinst called with unknown argument \`$1'" >&2
        exit 1
    ;;
esac

# Make the install dir if it doesn't exist
WEIGHTS_DIR="/opt/ros/noetic/share/darknet_ros/yolo_network_config/weights"
mkdir -p "$WEIGHTS_DIR"
# Download the weights
FILE="$WEIGHTS_DIR/yolov2-tiny.weights"
# Check if the file exists
if [ -f "$FILE" ]; then
    echo "File $FILE exists."
else
    echo "Downloading $FILE"
    wget -O "$FILE" https://github.com/leggedrobotics/darknet_ros/releases/download/1.1.4/yolov2-tiny.weights

FILE="$WEIGHTS_DIR/yolov3.weights"
if [ -f "$FILE" ]; then
    echo "File $FILE exists."
else
    echo "Downloading $FILE"
    wget -O "$FILE" https://github.com/leggedrobotics/darknet_ros/releases/download/1.1.4/yolov3.weights

# dh_installdeb will replace this with shell code automatically
# generated by other debhelper scripts.

#DEBHELPER#

exit 0